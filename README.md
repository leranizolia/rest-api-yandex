## CANDY DELIVERY APP
REST API for Yandex school

В данном проекте представлена реализация Rest API сервиса, которой позволяет нанимать курьеров на работу, принимать заказы и оптимально распределять заказы между курьерами. Проект разработан в рамках Школы backend разработки Яндекса

## Для запуска проекта нужно выполнить следующие шаги:

1) Склонировать проект и зайти в папку проекта (команда 'git clone' c ссылкой на проект)

2) Если сервер уже запущен то выполнить команду - 'killall python' или 'sudo kill -9 "process PID"' (PID можно найти командой 'sudo netstat -ltup')

3) Выполнить команду 'bash start_server.sh' или 'make all' (если запускать со сторонней ВМ, то нужно будет переписать путь в start_server.sh)

Перед использованием необходимо очистить все текущие таблицы, которые есть в mysql в базе данных candy_delivery_app следующим образом:

1) Зайти в mysql (команда в bash - 'mysql')

2) Выбрать базу данных - 'use candy_delivery_app;'

3) Очистить таблицу - 'TRUNCATE TABLE order;' и 'TRUNCATE TABLE courier;'

4) Выйти из mysql('exit')

После первого запуска желательно "закомментировать" db.create_all() в models.py, которая используется чисто для создания таблиц в базе данных из классов.

Тесты находятся в файле tests.py. Они включают как валидные, так и невалидные тесты для всех обработчиков, а также тесты, которые проверяют взаимодействие нескольких обработчиков между собой (к примеру, снятие заказов курьера после апдейта его параметров, учёт доставленных заказов при назначении новых). Перед каждым тестом даётся комментарий, содержащий краткую информацию о тесте (valid/invalid, что именно невалидно и т. п.), кроме того, по самому названию теста-функции можно понять, что проверяет тест. Библиотека pytest устроена таким образом, что можно по отдельности запускать интересующие тесты, а можно разом запустить все. Важно: для того чтобы проверить работу взаимодействия обработчиков между собой, базу данных надо было заполнить данными (файлы: 'data_couriers.py', 'data_orders.py', импорт реализован внутри файла 'test.py' перед 'сложными' тестами).

## При реализации были использованы библиотеки:

1) Flask - общее строение,

2) flask_SQLAlchemy - для работы с базой данных,

3) Datetime - для валидации и сохранения даты,

4) requests - для работы с  HTTP запросами;

5) pytest - для тестирования REST API сервиса

Для хранения данных была использована база данных Mysql (При запуске со стороннего компьютера необходимо создать базу данных 'candy_delivery_app', и переписать путь до нее в файле config.py)

## Файлы проекта

view.py - содержит все необходимые обработчики (1:POST/couriers, 2: PATCH/couriers/$courier_id, 3: POST/orders, 4: POST/orders/assign, 5: POST/orders/complete) и, соответственно, отвечает за все команды Rest API сервиса, кроме того, в некоторых обработчиках прописана валидация входных данных

validation.py - функции для валидации

models.py - хранит классы курьера (Courier) и заказа (Order)

config.py - конфигурация проекта

app.py - первичное объявление и обращение к базе данных

main.py - запуск программы

tests.py - содержит тесты с валидными и невалидными данными/запросами

start_server.sh - скрипт запуска сервера через gunicorn, именно его запускает Виртуальная машина при перезагрузке
